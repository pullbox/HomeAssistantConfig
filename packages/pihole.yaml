#-------------------------------------------
#  @CCOSTAN
#  Original Repo : https://github.com/CCOSTAN/Home-AssistantConfig
#  PiHole ad Blocking Related Packages
#  https://www.vcloudinfo.com/2019/03/revisiting-the-pi-on-pi-day-with-home-assistant.html
#  YouTube Video - https://youtu.be/woA88DFlH5c
#-------------------------------------------
pi_hole:
  host: 192.168.1.161:4865
  ssl: false
  verify_ssl: false

sensor pi_hole:
  # - platform: pi_hole
  #   host: 192.168.10.11:80
  #   location: admin
  #   ssl: false
  #   verify_ssl: false
  #   monitored_conditions:
  #     - ads_blocked_today
  #     - ads_percentage_today
  #     - dns_queries_today
  #     - domains_being_blocked
  #     - queries_cached
  #     - queries_forwarded
  #     - unique_clients
  #     - unique_domains

  - platform: template
    sensors:
      pi_hole:
        friendly_name: 'PiHole'
        entity_id: []
        value_template: "{{ 'Online' if is_state('device_tracker.pihole', 'home') else 'Offline' }}"

# Pi-Hole switch
# switch pihole:
#   - platform: command_line
#     switches:
#     pihole_temp_disable:
#       command_on: "curl -X GET 'http://192.168.10.11/admin/api.php?enable&auth='"
#       command_off: "curl -X GET 'http://192.168.10.11/admin/api.php?disable=3600&auth='"
#     command_state: "curl -X GET 'http://192.168.10.11/admin/api.php?status'| grep enabled"
#     value_template: "{{ value_json.status == 'enabled' }}

#-------------------------------------------
group pi_hole:
  pi_hole:
    entities:
      - sensor.pi_hole
      - sensor.pi_hole_version
      - sensor.pi_hole_dns_unique_clients
      - sensor.pi_hole_dns_queries_today
      - sensor.pi_hole_ads_blocked_today
      - sensor.pi_hole_ads_percentage_today
      - sensor.pi_hole_ads_percentage_blocked_today
#-------------------------------------------
